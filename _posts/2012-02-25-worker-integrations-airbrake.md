---
permalink: /worker/articles/integrations/airbrake
title: Integrating with Airbrake
categories:
 - worker
 - articles
 - integrations
breadcrumbs:
  - ['Articles', '/articles']
  - ['Integrations', '/integrations']
  - ['Airbrake', '/airbrake']
tags:
 - airbrake
 - integrations
 - exceptions
languages:
- name: 'ruby'
  command: 'ruby'
  extension: 'rb'
- name: 'php'
  command: 'php'
  extension: 'php'

layout: default
section: worker
---

# Integrating with Airbrake

{% if page.languages %}
{% include language-switcher-head.html %}
{% endif %}

[Airbrake](http://www.airbrake.io) collects errors generated by other applications and aggregates the results for review. You
will always see worker errors in the IronWorker UI as well as the log output, but by following this tutorial you can also
send worker errors over to Airbrake.

{% include language-switcher.html %}

## Step 1: Airbrake Library

Merge the Airbrake library into your worker.

<div class="ruby">
{% highlight ruby %}
merge_gem 'airbrake'
{% endhighlight %}
</div>


## Step 2: Configure Airbrake

Add the Airbrake configuration block to your worker

<div class="ruby">
{% highlight ruby %}
Airbrake.configure do |config|
  config.api_key = api_key
end
{% endhighlight %}
</div>



## Step 3: Catch Errors

You need to wrap your worker with a begin-rescue or try-catch block in order to catch and send to Airbrake.

<div class="ruby">
{% highlight ruby %}
def run
  begin
    # Your worker code in here

  rescue => ex

  end
end
{% endhighlight %}
</div>



## Step 4: Send caught errors to Airbrake

After we catch the error, let's send it to Airbrake and re-raise it so the worker fails (otherwise the worker would complete successfully but didn't work as expected).

<div class="ruby">
{% highlight ruby %}
Airbrake.notify(
  :error_class => "#{self.class}",
  :error_message => "#{ex} - #{ex.backtrace}"
)
puts "Error sent to Airbrake."
raise ex
{% endhighlight %}
</div>





## That's it! Full worker below.

<div class="ruby">
{% highlight ruby %}
require 'iron_worker'

class WorkerWithAirbrake < IronWorker::Base
  attr_accessor :api_key

  merge_gem 'airbrake'

  def run
    begin
      Airbrake.configure do |config|
        config.api_key = api_key
      end
      #--- YOUR WORKER CODE BELOW HERE ---


    rescue => ex
      Airbrake.notify(
        :error_class => "#{self.class}",
        :error_message => "#{ex} - #{ex.backtrace}"
      )
      puts "Error sent to Airbrake."
      raise ex
    end
  end
end
{% endhighlight %}
</div>


<div class="php">
{% highlight php %}
coming soon
{% endhighlight %}
</div>